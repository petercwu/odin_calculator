<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="styles.css">
        <title> Odin Calculator </title>
    </head>
        <button class="number" id="1" data-key="97"> 1 </button>
        <button class="number" id="2" data-key="98"> 2 </button>
        <button class="number" id="3" data-key="99"> 3 </button>
        <button class="number" id="4" data-key="100"> 4 </button>
        <button class="number" id="5" data-key="101"> 5 </button>
        <button class="number" id="6" data-key="102"> 6 </button>
        <button class="number" id="7" data-key="103"> 7 </button>
        <button class="number" id="8" data-key="104"> 8 </button>
        <button class="number" id="9" data-key="105"> 9 </button>
        <button class="operator" id="add" data-key="107"> + </button>
        <button class="operator" id="subtract" data-key="109"> - </button>
        <button class="operator" id="multiply" data-key="106"> * </button>
        <button class="operator" id="divide" data-key="111"> รท </button>
        <button class="number" id="." data-key="110"> . </button>
        <button id="equal" data-key="13"> = </button>
        <button id="del" data-key="8"> del </button>
        <button id="clear"> clear </button>
        <p class="displayBox" id="displayHistory">  </p>
        <p class="displayBox" id="currentDisplay">0</p>
    <script>
        let tempOne;
        let tempTwo;
        let tempOperator;
        //a is first number
        //b is second number
        const mathFunctions = [
            {//index 0
                function: "add",
                operate: function (a,b) {return a + b;}
            },
            {//index 1
                function: "subtract",
                operate: function (a,b) {return a - b;}
            },
            {//index 2
                function: "multiply",
                operate: function (a,b) {return a * b;}
            },
            {//index 3
                function: "divide",
                operate: function (a,b) {return a / b;}
            },
        ];
        const numbers = document.querySelectorAll(".number");
        const currentDisplay = document.querySelector("#currentDisplay");
        const displayHistory = document.querySelector("#displayHistory");
        const operators = document.querySelectorAll(".operator");
        const clear = document.querySelector("#clear");
        const equals = document.querySelector("#equal");
        const del = document.querySelector("#del");
        let display = [];
        numbers.forEach((number) => { //displays current selected number
            number.addEventListener("click", () => {
                display.push(number.id);
                currentDisplay.textContent = display.join(""); //merges numbers in array and displays it
            });
        });
        operators.forEach((operator) => { 
            operator.addEventListener("click", () => {
                tempOperator = operator.id; //stores the clicked operator inside a variable
                if (tempOne == undefined) { //only stores the displayed number as tempOne ONCE until reset by equals
                    tempOne = parseFloat(currentDisplay.textContent);
                    display = []; //resets display after storing tempOne
                }
                let operatorSign = document.getElementById(operator.id).innerHTML; //gets the symbol of the operator
                displayHistory.textContent = tempOne + operatorSign;
            });
        });
        equals.addEventListener("click", () => { // matches the clicked operator with the operator inside the array and operates on the two numbers
            tempTwo = parseFloat(currentDisplay.textContent);
            if ((tempOne && tempTwo) !== undefined) { //only operates if two numbers are selected
                displayHistory.textContent = displayHistory.textContent + currentDisplay.textContent + " =";
                for (let i = 0; i < mathFunctions.length; i++) { 
                    if (mathFunctions[i].function == tempOperator) {
                        let answer = mathFunctions[i].operate(tempOne, tempTwo);
                        currentDisplay.textContent = answer;
                        display = []; //resets the stored variable
                        tempOne = undefined; //makes it so you can use currentDisplay number for furthur operations
                    }
                }
            }
        });
        clear.addEventListener("click", () => { //clears the display and variables
            currentDisplay.textContent = "0";
            displayHistory.textContent = "";
            tempOne = tempTwo = tempOperator = undefined;
            display = [];
        });
        del.addEventListener ("click", () => { //deletes last added digit in display
            display.pop();
            currentDisplay.textContent = display.join("");
        });
    </script>
</html>